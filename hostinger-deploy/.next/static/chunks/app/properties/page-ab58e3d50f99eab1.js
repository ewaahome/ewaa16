(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{9256:function(e,t,l){Promise.resolve().then(l.bind(l,6220)),Promise.resolve().then(l.bind(l,687)),Promise.resolve().then(l.bind(l,8481))},9146:function(e,t,l){"use strict";var s=l(7437);t.Z=e=>{let{label:t,onClick:l,disabled:a,outline:n,small:i,icon:r}=e;return(0,s.jsxs)("button",{disabled:a,onClick:l,className:"\n        relative\n        disabled:opacity-70\n        disabled:cursor-not-allowed\n        rounded-lg\n        hover:opacity-80\n        transition\n        w-full\n        ".concat(n?"bg-white":"bg-rose-500","\n        ").concat(n?"border-black":"border-rose-500","\n        ").concat(n?"text-black":"text-white","\n        ").concat(i?"text-sm":"text-md","\n        ").concat(i?"py-1":"py-3","\n        ").concat(i?"font-light":"font-semibold","\n        ").concat(i?"border-[1px]":"border-2","\n      "),children:[r&&(0,s.jsx)(r,{size:24,className:" absolute left-4 top-3 "}),t]})}},6220:function(e,t,l){"use strict";l.r(t);var s=l(7437),a=l(2265);t.default=e=>{let{children:t}=e,[l,n]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{n(!0)},[]),l)?(0,s.jsx)(s.Fragment,{children:t}):null}},1507:function(e,t,l){"use strict";l.r(t);var s=l(7437);t.default=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:" max-w-[2520px] mx-auto xl:px-20  md:px-10 sm:px-2 px-4 ",children:t})}},687:function(e,t,l){"use strict";l.r(t);var s=l(7437),a=l(4033),n=l(9146),i=l(1855);t.default=e=>{let{title:t="لا توجد نتائج",subtitle:l="حاول تغيير أو إزالة بعض الفلاتر",showReset:r}=e,o=(0,a.useRouter)();return(0,s.jsxs)("div",{className:" h-[60vh] flex  flex-col  gap-2  justify-center  items-center  ",children:[(0,s.jsx)(i.default,{center:!0,title:t,subtitle:l}),(0,s.jsx)("div",{className:"w-48 mt-4",children:r&&(0,s.jsx)(n.Z,{outline:!0,label:"إزالة جميع الفلاتر",onClick:()=>o.push("/")})})]})}},1855:function(e,t,l){"use strict";l.r(t);var s=l(7437);t.default=e=>{let{title:t,subtitle:l,center:a}=e;return(0,s.jsxs)("div",{className:a?"text-center":"text-start",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:t}),(0,s.jsx)("div",{className:"font-light text-neutral-500 mt-2",children:l})]})}},4786:function(e,t,l){"use strict";var s=l(7437),a=l(6691),n=l.n(a),i=l(2265),r=l(5932),o=l(5624),c=l(5925);t.Z=e=>{let{onChange:t,value:l}=e,[a,d]=(0,i.useState)(!1),u=(0,i.useCallback)(e=>{if("success"!==e.event)return;let l=e.info.secure_url;t(l),c.Am.success("تم رفع الصورة بنجاح")},[t]);return(0,s.jsx)(o.ZF,{onUpload:u,uploadPreset:"eiwaa_uploads",options:{maxFiles:1,resourceType:"image",sources:["local","url","camera"],clientAllowedFormats:["jpg","jpeg","png","webp"],maxFileSize:5e6,language:"en",text:{en:{local:{browse:"اختر صورة",dd_title_single:"اسحب وأفلت الصورة هنا",drop_title_single:"اسحب وأفلت الصورة هنا"},queue:{title:"قائمة الصور للرفع",title_uploading_with_counter:"جاري رفع {{num}} صور"},crop:{title:"قص الصورة"}}}},children:e=>{let{open:t}=e;return(0,s.jsx)("div",{onClick:()=>!a&&(null==t?void 0:t()),className:"\n              relative\n              cursor-pointer\n              hover:opacity-70\n              transition\n              border-dashed \n              border-2 \n              p-20 \n              border-neutral-300\n              flex\n              flex-col\n              justify-center\n              items-center\n              gap-4\n              text-neutral-600\n              ".concat(a?"opacity-50":"","\n            "),children:l?(0,s.jsx)("div",{className:"absolute inset-0 w-full h-full",children:(0,s.jsx)(n(),{fill:!0,style:{objectFit:"cover"},src:l,alt:"صورة العقار",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.sOP,{size:50}),(0,s.jsx)("div",{className:"font-semibold text-lg",children:"انقر لرفع الصورة"}),(0,s.jsx)("div",{className:"text-neutral-500 text-sm",children:"صورة واحدة فقط"})]})})}})}},7674:function(e,t,l){"use strict";var s=l(7437),a=l(6820);t.Z=e=>{let{id:t,label:l,type:n="text",disabled:i,formatPrice:r,register:o,required:c,errors:d}=e;return(0,s.jsxs)("div",{className:"w-full relative",children:[r&&(0,s.jsx)(a.pu9,{size:24,className:" text-neutral-700 absolute top-5 left-2 "}),(0,s.jsx)("input",{id:t,disabled:i,...o(t,{required:c}),placeholder:" ",type:n,className:"\n          peer\n          w-full\n          p-4\n          pt-6 \n          font-light \n          bg-white \n          border-2\n          rounded-md\n          outline-none\n          transition\n          disabled:opacity-70\n          disabled:cursor-not-allowed\n          ".concat(r?"pl-9":"pl-4","\n          ").concat(d[t]?"border-rose-500":"border-neutral-300","\n          ").concat(d[t]?"focus:border-rose-500":"focus:border-black","\n        ")}),(0,s.jsx)("label",{className:"\n          absolute \n          text-md\n          duration-150 \n          transform \n          -translate-y-3 \n          top-5 \n          z-10 \n          origin-[0] \n          ".concat(r?"left-9":"left-4","\n          peer-placeholder-shown:scale-100 \n          peer-placeholder-shown:translate-y-0 \n          peer-focus:scale-75\n          peer-focus:-translate-y-4\n          ").concat(d[t]?"text-rose-500":"text-zinc-400","\n        "),children:l})]})}},7571:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return listings_ListingCard}});var s=l(7437),a=l(6691),n=l.n(a),i=l(4033),r=l(2265),o=l(6259),c=l(2309),d=l(1768);let u={"Saudi Arabia":"المملكة العربية السعودية","United Arab Emirates":"الإمارات العربية المتحدة",Kuwait:"الكويت",Qatar:"قطر",Bahrain:"البحرين",Oman:"عمان",Egypt:"مصر",Jordan:"الأردن",Lebanon:"لبنان"},m=d.map(e=>({value:e.cca2,label:e.name.common,arabicLabel:u[e.name.common]||e.name.common,flag:e.flag,latlng:e.latlng,region:e.region}));var hooks_useCountries=()=>({getAll:()=>m,getByValue:e=>m.find(t=>t.value===e)}),p=l(9150),hooks_useFavorite=e=>{let{listingId:t,currentUser:l}=e,[s,a]=(0,r.useState)(!1),n=(0,r.useCallback)(async e=>{e.stopPropagation(),a(e=>!e)},[]);return{hasFavorited:s,toggleFavorite:n}},components_HeartButton=e=>{let{listingId:t,currentUser:l}=e,{hasFavorited:a,toggleFavorite:n}=hooks_useFavorite({listingId:t,currentUser:l});return(0,s.jsxs)("div",{onClick:n,className:" relative hover:opacity-80 transition cursor-pointer ",children:[(0,s.jsx)(p.lo,{size:28,className:" fill-white absolute -top-[2px] -right-[2px] "}),(0,s.jsx)(p.M_L,{size:24,className:a?"fill-rose-500":"fill-neutral-500/70"})]})},x=l(9146);let f={شقق:"شقق",فلل:"فلل",غرفة:"غرفة",شاليهات:"شاليهات",استراحات:"استراحات",مزارع:"مزارع",مخيمات:"مخيمات",أكواخ:"أكواخ","بيوت الشجر":"بيوت الشجر",مسابح:"مسابح",قصور:"قصور","تصاميم مميزة":"تصاميم مميزة"};var listings_ListingCard=e=>{let{data:t,reservation:l,onAction:a,disabled:d,actionLabel:u,actionId:m="",currentUser:p}=e,h=(0,i.useRouter)(),{getByValue:g}=hooks_useCountries();g(t.locationValue);let b=(0,r.useCallback)(e=>{e.stopPropagation(),d||null==a||a(m)},[d,a,m]),v=(0,r.useMemo)(()=>l?l.totalPrice:t.price,[l,t.price]);(0,r.useMemo)(()=>{if(!l)return null;let e=new Date(l.startDate),t=new Date(l.endDate);return"".concat((0,o.default)(e,"dd",{locale:c.Z})," ").concat((0,o.default)(e,"MMMM",{locale:c.Z})," - ").concat((0,o.default)(t,"dd",{locale:c.Z})," ").concat((0,o.default)(t,"MMMM",{locale:c.Z}))},[l]);let j=(0,r.useMemo)(()=>t.category?f[t.category]||t.category:"",[t.category]);return(0,s.jsx)("div",{onClick:()=>h.push("/listings/".concat(t.id)),className:"col-span-1 cursor-pointer group",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:" aspect-square  w-full  relative  overflow-hidden  rounded-xl ",children:[(0,s.jsx)(n(),{src:t.imageSrc||"/placeholder.jpg",fill:!0,className:" object-cover  h-full  w-full  group-hover:scale-110  transition ",alt:"Listing"}),(0,s.jsx)("div",{className:" absolute top-3 right-3 ",children:(0,s.jsx)(components_HeartButton,{listingId:t.id,currentUser:p})})]}),(0,s.jsx)("div",{className:"font-semibold text-lg",children:t.title}),(0,s.jsx)("div",{className:"font-light text-neutral-500",children:j}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[v," ريال"]}),!l&&(0,s.jsx)("div",{className:"font-light",children:"الليلة"})]}),a&&u&&(0,s.jsx)(x.Z,{disabled:d,small:!0,label:u,onClick:b})]})})}},3837:function(e,t,l){"use strict";var s=l(7437),a=l(2265),n=l(2410),i=l(9146);t.Z=e=>{let{isOpen:t,onClose:l,onSubmit:r,title:o,body:c,actionLabel:d,footer:u,disabled:m,secondaryAction:p,secondaryActionLabel:x}=e,[f,h]=(0,a.useState)(t);(0,a.useEffect)(()=>{h(t)},[t]);let g=(0,a.useCallback)(()=>{m||(h(!1),setTimeout(()=>{l()},300))},[l,m]),b=(0,a.useCallback)(()=>{m||r()},[r,m]),v=(0,a.useCallback)(()=>{!m&&p&&p()},[p,m]);return t?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:" justify-center  items-center  flex  overflow-x-hidden  overflow-y-auto  fixed  inset-0  z-50  outline-none  focus:outline-none bg-neutral-800/70 ",children:(0,s.jsx)("div",{className:" relative  w-full md:w-4/6 lg:w-3/6 xl:w-2/5 my-6 mx-auto  h-full  lg:h-auto md:h-auto ",children:(0,s.jsx)("div",{className:"\n            translate\n            duration-300\n            h-full\n            ".concat(f?"translate-y-0":"translate-y-full","\n            ").concat(f?"opacity-100":"opacity-0","\n          "),children:(0,s.jsxs)("div",{className:" translate h-full lg:h-auto md:h-auto border-0  rounded-lg  shadow-lg  relative  flex  flex-col  w-full  bg-white  outline-none  focus:outline-none ",children:[(0,s.jsxs)("div",{className:" flex  items-center  p-6 rounded-t justify-center relative border-b-[1px] ",children:[(0,s.jsx)("button",{className:" p-1 border-0  hover:opacity-70 transition absolute left-9 ",onClick:g,children:(0,s.jsx)(n.QAE,{size:18})}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:o})]}),(0,s.jsx)("div",{className:"relative p-6 flex-auto",children:c}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,s.jsxs)("div",{className:" flex  flex-row  items-center  gap-4  w-full ",children:[p&&x&&(0,s.jsx)(i.Z,{disabled:m,label:x,onClick:v,outline:!0}),(0,s.jsx)(i.Z,{disabled:m,label:d,onClick:b})]}),u]})]})})})})}):null}},8481:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return properties_PropertiesClient}});var s=l(7437),a=l(5925),n=l(4829),i=l(2265),r=l(4033),o=l(1855),c=l(1507),d=l(7571),u=l(4660);let m=(0,u.Ue)(e=>({isOpen:!1,listingData:null,onOpen:t=>e({isOpen:!0,listingData:t}),onClose:()=>e({isOpen:!1})}));var p=l(1865),x=l(3837),f=l(7674),h=l(4786),modals_EditPropertyModal=e=>{let{listingId:t,title:l,description:c,imageSrc:d,price:u}=e,g=(0,r.useRouter)(),b=m(),[v,j]=(0,i.useState)(!1),{register:N,handleSubmit:w,setValue:y,watch:C,formState:{errors:k},reset:_}=(0,p.cI)({defaultValues:{title:l,description:c,imageSrc:d,price:u}}),S=C("imageSrc"),setCustomValue=(e,t)=>{y(e,t,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},Z=(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(o.default,{title:"تعديل بيانات العقار",subtitle:"قم بتحديث معلومات العقار الخاص بك"}),(0,s.jsx)(f.Z,{id:"title",label:"عنوان العقار",disabled:v,register:N,errors:k,required:!0}),(0,s.jsx)(f.Z,{id:"description",label:"وصف العقار",disabled:v,register:N,errors:k,required:!0}),(0,s.jsx)(f.Z,{id:"price",label:"السعر",formatPrice:!0,type:"number",disabled:v,register:N,errors:k,required:!0}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("div",{className:"font-semibold mb-2",children:"صورة العقار"}),(0,s.jsx)(h.Z,{value:S,onChange:e=>setCustomValue("imageSrc",e)})]})]});return(0,s.jsx)(x.Z,{isOpen:b.isOpen,onClose:b.onClose,onSubmit:w(e=>{j(!0),e.imageSrc&&e.imageSrc.startsWith("blob:")&&(e.imageSrc="https://res.cloudinary.com/dzwkeydij/image/upload/v1701876720/property_images/default_property_image.jpg"),n.Z.put("/api/listings/".concat(t),e).then(()=>{a.Am.success("تم تعديل العقار بنجاح!"),g.refresh(),_(),b.onClose()}).catch(()=>{a.Am.error("حدث خطأ ما.")}).finally(()=>{j(!1)})}),actionLabel:"تعديل",secondaryActionLabel:"إلغاء",secondaryAction:b.onClose,title:"تعديل العقار",body:Z,disabled:v})},properties_PropertiesClient=e=>{let{listings:t,currentUser:l}=e,u=(0,r.useRouter)(),p=m(),[x,f]=(0,i.useState)(""),h=(0,i.useCallback)(e=>{f(e),n.Z.delete("/api/listings/".concat(e)).then(()=>{a.Am.success("تم حذف العقار"),u.refresh()}).catch(e=>{var t,l;a.Am.error((null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.error)||"حدث خطأ ما")}).finally(()=>{f("")})},[u]),g=(0,i.useCallback)(e=>{p.onOpen({id:e.id,title:e.title,description:e.description,imageSrc:e.imageSrc,price:e.price})},[p]);return(0,s.jsxs)(c.default,{children:[(0,s.jsx)(o.default,{title:"عقاراتي",subtitle:"قائمة بالعقارات التي قمت بنشرها"}),(0,s.jsx)("div",{className:" mt-10 grid  grid-cols-1  sm:grid-cols-2  md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-8 ",children:t.map(e=>(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsx)(d.default,{data:e,actionId:e.id,onAction:h,disabled:x===e.id,actionLabel:"حذف العقار",currentUser:l}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("button",{onClick:()=>g(e),className:" w-full bg-white border border-black text-black font-semibold py-2 rounded-lg hover:opacity-80 transition ",children:"تعديل العقار"})})]},e.id))}),p.listingData&&(0,s.jsx)(modals_EditPropertyModal,{listingId:p.listingData.id,title:p.listingData.title,description:p.listingData.description,imageSrc:p.listingData.imageSrc,price:p.listingData.price})]})}}},function(e){e.O(0,[712,603,465,115,400,352,259,228,165,35,971,472,744],function(){return e(e.s=9256)}),_N_E=e.O()}]);