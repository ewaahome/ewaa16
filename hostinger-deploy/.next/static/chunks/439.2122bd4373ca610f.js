"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{439:function(e,r,t){let a;t.r(r);var l=t(7437),s=t(2265),n=t(6691),o=t.n(n);try{a=t(3901)}catch(e){console.warn("Mapbox GL could not be loaded. Using fallback map.")}r.default=e=>{let{center:r,zoom:t=9,markers:n=[]}=e,c=(0,s.useRef)(null),i=(0,s.useRef)(null),[u,d]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),f=r&&2===r.length?[r[0],r[1]]:[46.6753,24.7136];return((0,s.useEffect)(()=>{if(!c.current||!a){g(!0);return}let e="pk.eyJ1IjoiZWl3YWFob21lIiwiYSI6ImNsdWZ6dWJ0ZzBkZ2oyaW1zZ2J6Z2J6Z2IifQ.eyJ1IjoiZWl3YWFob21lIiwiYSI6ImNsdWZ6dWJ0ZzBkZ2oyaW1zZ2J6Z2J6Z2IifQ";if(!e){console.error("Mapbox access token is missing"),g(!0);return}try{return a.accessToken=e,i.current=new a.Map({container:c.current,style:"mapbox://styles/mapbox/streets-v11",center:f,zoom:t,attributionControl:!1}),i.current.on("load",()=>{d(!0),console.log("Map style loaded successfully")}),i.current.on("error",e=>{console.error("Map error:",e),g(!0)}),()=>{i.current&&i.current.remove()}}catch(e){console.error("Error initializing map:",e),g(!0)}},[f,t]),(0,s.useEffect)(()=>{if(!i.current||!u||m)return;let e=document.getElementsByClassName("mapboxgl-marker");Array.from(e).forEach(e=>e.remove()),n.forEach(e=>{if(e.lat&&e.lng){let r=document.createElement("div");r.className="marker",r.style.width="32px",r.style.height="32px",r.style.backgroundImage="url(/images/marker.png)",r.style.backgroundSize="cover",r.style.cursor="pointer",new a.Marker(r).setLngLat([e.lng,e.lat]).addTo(i.current)}})},[n,u,m]),m)?(0,l.jsx)("div",{className:"h-[35vh] rounded-lg relative bg-gray-200 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(o(),{src:"/images/map-placeholder.jpg",alt:"Map placeholder",width:400,height:250,className:"rounded-lg mx-auto"}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"الخريطة غير متاحة حاليًا"})]})}):(0,l.jsx)("div",{ref:c,className:"h-[35vh] rounded-lg relative",style:{width:"100%"}})}}}]);